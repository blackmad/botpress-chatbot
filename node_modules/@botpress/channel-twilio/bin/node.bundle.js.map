{"version":3,"sources":["webpack:///webpack/bootstrap d509537223009876a224","webpack:///external \"lodash\"","webpack:///./src/util.js","webpack:///./src/index.js","webpack:///external \"twilio\"","webpack:///external \"querystring\"","webpack:///external \"body-parser\"","webpack:///./src/umm.js","webpack:///external \"util\"","webpack:///external \"bluebird\""],"names":["extractNumber","event","number","get","Error","module","exports","client","config","accountSID","type","required","env","authToken","fromNumber","messagingServiceSid","init","bp","configurator","handleOutgoing","next","platform","payload","to","body","text","isNil","from","messages","create","then","_promise","_resolve","middlewares","register","name","order","handler","description","loadAll","ready","id","db","knex","where","users","existingUser","newUser","first_name","last_name","profile_pic","saveUser","getOrCreateUser","logDebug","message","process","TWILIO_DEBUG","logger","debug","twilio","router","getRouter","auth","use","urlencoded","extended","post","req","res","headers","host","originalUrl","valid","validateExpressRequest","protocol","sendStatus","Body","From","fromCountry","FromCountry","fromCity","FromCity","fromState","FromState","smsSid","SmsSid","messageSid","SmsMessageSid","_toNumber","To","_accountSid","AccountSid","user","sendIncoming","raw","PromisifyEvent","resolve","reject","_reject","processOutgoing","blocName","instruction","ins","Object","assign","optionsList","options","pick","prop","strRep","inspect","at","renderers","registerConnector","args","templates"],"mappings":"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","file":"node.bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 2);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap d509537223009876a224","module.exports = require(\"lodash\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"lodash\"\n// module id = 0\n// module chunks = 0","import _ from 'lodash'\n\nfunction extractNumber(event) {\n  const number =\n    _.get(event, 'user.number') ||\n    _.get(event, 'number') ||\n    _.get(event, 'raw.to') ||\n    _.get(event, 'raw.number') ||\n    _.get(event, 'user.userId')\n\n  if (!number) {\n    throw new Error('Could not extract user phone number number from event')\n  }\n\n  return number\n}\n\nmodule.exports = { extractNumber }\n\n\n\n// WEBPACK FOOTER //\n// ./src/util.js","import twilio from 'twilio'\nimport qs from 'querystring'\nimport _ from 'lodash'\nimport bodyParser from 'body-parser'\n\nimport { extractNumber } from './util'\nimport UMM from './umm'\n\nlet client = null\n\nmodule.exports = {\n  config: {\n    accountSID: { type: 'string', required: true, env: 'TWILIO_SID' },\n    authToken: { type: 'string', required: true, env: 'TWILIO_TOKEN' },\n    fromNumber: { type: 'string', required: false, env: 'TWILIO_FROM' },\n    messagingServiceSid: { type: 'string', required: false, env: 'TWILIO_MESSAGING_SERVICE_SID' }\n  },\n\n  init: async function(bp, configurator) {\n    bp.middlewares.register({\n      name: 'twilio.sendSms',\n      type: 'outgoing',\n      order: 100,\n      handler: handleOutgoing,\n      module: 'botpress-twilio',\n      description: 'Sends out text messages by SMS using Twilio'\n    })\n\n    const { accountSID, authToken, fromNumber, messagingServiceSid } = await configurator.loadAll()\n\n    client = new twilio(accountSID, authToken)\n\n    function handleOutgoing(event, next) {\n      if (event.platform !== 'twilio') {\n        // Only process twilio messages\n        return next()\n      }\n\n      const payload = {\n        to: extractNumber(event),\n        body: event.text\n      }\n\n      if (!_.isNil(fromNumber)) {\n        payload.from = fromNumber\n      } else {\n        payload.messagingServiceSid = messagingServiceSid\n      }\n\n      client.messages.create(payload).then(() => {\n        if (event._promise && event._resolve) {\n          event._resolve()\n        }\n      })\n    }\n\n    UMM(bp)\n  },\n\n  ready: async function(bp, configurator) {\n    function logDebug(message) {\n      if (process.env.TWILIO_DEBUG) {\n        bp.logger.debug('[Twilio] ' + message)\n      }\n    }\n\n    async function getOrCreateUser(fromNumber) {\n      const id = `twilio:${fromNumber}`\n      const existingUser = await bp.db\n        .get()\n        .then(knex => knex('users').where('id', id))\n        .then(users => users[0])\n\n      if (existingUser) {\n        existingUser.id = fromNumber\n        return existingUser\n      } else {\n        const newUser = {\n          first_name: 'Unknown',\n          last_name: 'Unknown',\n          profile_pic: null,\n          id: fromNumber,\n          platform: 'twilio',\n          number: fromNumber\n        }\n\n        await bp.db.saveUser(newUser)\n        return newUser\n      }\n    }\n\n    bp.twilio = { getOrCreateUser }\n\n    const router = bp.getRouter('botpress-twilio', {\n      'bodyParser.json': false,\n      auth: false,\n      'bodyParser.urlencoded': false\n    })\n\n    router.use(\n      bodyParser.urlencoded({\n        extended: false\n      })\n    )\n\n    const { authToken } = await configurator.loadAll()\n\n    router.post('/webhook', async (req, res) => {\n      logDebug(`Incoming Twilio Message [HOST='${req.headers.host}'] [URL='${req.originalUrl}']`)\n\n      const valid = twilio.validateExpressRequest(req, authToken, { protocol: 'https' })\n\n      if (!valid) {\n        logDebug('Signature verification failed')\n        return res.sendStatus(403)\n      }\n\n      logDebug('Message verified')\n      res.sendStatus(204)\n\n      const {\n        Body: message,\n        From: fromNumber,\n        FromCountry: fromCountry,\n        FromCity: fromCity,\n        FromState: fromState,\n        SmsSid: smsSid,\n        SmsMessageSid: messageSid,\n        To: _toNumber,\n        AccountSid: _accountSid\n      } =\n        req.body || {}\n\n      const user = await getOrCreateUser(fromNumber)\n\n      bp.middlewares.sendIncoming({\n        platform: 'twilio',\n        type: 'message',\n        user: user,\n        text: message,\n        raw: { message, fromNumber, fromCountry, fromCity, fromState, smsSid, messageSid }\n      })\n\n      logDebug('Message delivered to bot')\n    })\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/index.js","module.exports = require(\"twilio\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"twilio\"\n// module id = 4\n// module chunks = 0","module.exports = require(\"querystring\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"querystring\"\n// module id = 5\n// module chunks = 0","module.exports = require(\"body-parser\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"body-parser\"\n// module id = 6\n// module chunks = 0","import util from 'util'\nimport _ from 'lodash'\nimport Promise from 'bluebird'\n\nimport { extractNumber } from './util'\n\nfunction PromisifyEvent(event) {\n  if (!event._promise) {\n    event._promise = new Promise((resolve, reject) => {\n      event._resolve = resolve\n      event._reject = reject\n    })\n  }\n\n  return event\n}\n\nfunction processOutgoing({ event, blocName, instruction }) {\n  const ins = Object.assign({}, instruction) // Create a shallow copy of the instruction\n\n  ////////\n  // PRE-PROCESSING\n  ////////\n\n  const optionsList = ['typing']\n\n  const options = _.pick(instruction, optionsList)\n\n  for (const prop of optionsList) {\n    delete ins[prop]\n  }\n\n  /////////\n  /// Processing\n  /////////\n\n  if (!_.isNil(instruction.text)) {\n    const number = extractNumber(event)\n\n    return PromisifyEvent({\n      platform: 'twilio',\n      type: 'text',\n      user: { id: number, number },\n      raw: Object.assign({ to: number, message: instruction.text }, options),\n      text: instruction.text\n    })\n  }\n\n  ////////////\n  /// POST-PROCESSING\n  ////////////\n\n  // Nothing to post-process yet\n\n  ////////////\n  /// INVALID INSTRUCTION\n  ////////////\n\n  const strRep = util.inspect(instruction, false, 1)\n  throw new Error(`Unrecognized instruction in Twilio in bloc '${blocName}': ${strRep}`)\n}\n\nmodule.exports = bp => {\n  const [renderers, registerConnector] = _.at(bp, ['renderers', 'renderers.registerConnector'])\n\n  renderers &&\n    registerConnector &&\n    registerConnector({\n      platform: 'twilio',\n      processOutgoing: args => processOutgoing(Object.assign({}, args, { bp })),\n      templates: []\n    })\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/umm.js","module.exports = require(\"util\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"util\"\n// module id = 8\n// module chunks = 0","module.exports = require(\"bluebird\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"bluebird\"\n// module id = 9\n// module chunks = 0"],"sourceRoot":""}