{"version":3,"sources":["../../src/renderers/builtin_carousel.js"],"names":["data","on","template_type","elements","items","map","card","buttons","actions","a","action","type","title","payload","url","buttonsWrapper","image_url","image","resolve","BOT_URL","subtitle","typing","text","picture","encrypt","dest","flow","attachments","contentType","content","images","value","name"],"mappings":"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","file":"builtin_carousel.js","sourcesContent":["// TODO\n// Add card support to Telegram\n\nimport url from 'url'\n\nexport default data => [\n  {\n    on: 'facebook',\n    template_type: 'generic',\n    elements: data.items.map(card => {\n      const buttons = (card.actions || []).map(a => {\n        if (a.action === 'Say something') {\n          return {\n            type: 'postback',\n            title: a.title,\n            payload: a.title\n          }\n        } else if (a.action === 'Open URL') {\n          return {\n            type: 'web_url',\n            title: a.title,\n            url: a.url\n          }\n        }\n      })\n      const buttonsWrapper = card.actions ? { buttons } : {}\n\n      return {\n        title: card.title,\n        image_url: card.image ? url.resolve(data.BOT_URL, card.image) : null,\n        subtitle: card.subtitle,\n        ...buttonsWrapper\n      }\n    }),\n\n    typing: data.typing\n  },\n  {\n    on: 'webchat',\n    type: 'carousel',\n    text: ' ',\n    elements: data.items.map(card => ({\n      title: card.title,\n      picture: card.image ? url.resolve(data.BOT_URL, card.image) : null,\n      subtitle: card.subtitle,\n      buttons: (card.actions || []).map(a => {\n        if (a.action === 'Say something') {\n          return {\n            title: a.title,\n            payload: a.title\n          }\n        } else if (a.action === 'Open URL') {\n          return {\n            title: a.title,\n            url: a.url\n          }\n        } else if (a.action === 'Flow to ...') {\n          return {\n            title: a.title,\n            encrypt: true,\n            payload: {\n              action: 'gotoFlow',\n              dest: a.flow\n            }\n          }\n        }\n      })\n    })),\n    typing: data.typing\n  },\n  {\n    on: 'microsoft',\n    attachments: data.items.map(card => ({\n      contentType: 'application/vnd.microsoft.card.hero',\n      content: {\n        title: card.title,\n        subtitle: card.subtitle,\n        images: card.image ? [{ url: url.resolve(data.BOT_URL, card.image) }] : [],\n        buttons: (card.actions || []).map(a => {\n          if (a.action === 'Say something') {\n            return {\n              type: 'imBack',\n              title: a.title,\n              value: a.title\n            }\n          } else if (a.action === 'Open URL') {\n            return {\n              type: 'openUrl',\n              title: a.title,\n              value: a.url\n            }\n          }\n        })\n      }\n    }))\n  },\n  {\n    on: 'slack',\n    attachments: data.items.map(card => ({\n      title: card.title,\n      image_url: card.image ? url.resolve(data.BOT_URL, card.image) : null,\n      text: card.subtitle,\n      actions: (card.actions || []).map(a => {\n        if (a.action === 'Say something') {\n          return {\n            name: 'press',\n            text: a.title,\n            type: 'button',\n            value: a.title\n          }\n        } else if (a.action === 'Open URL') {\n          return {\n            type: 'button',\n            text: a.title,\n            url: a.url\n          }\n        }\n      })\n    }))\n  }\n]\n"]}