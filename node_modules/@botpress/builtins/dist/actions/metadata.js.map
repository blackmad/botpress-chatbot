{"version":3,"sources":["../../src/actions/metadata.js"],"names":["actions","metadata","_","mapValues","action","description","params","keys","children","filter","x","startsWith","title","get","category","key","flags","required","presence","def","default","push","name","type","err"],"mappings":";;;;;;AAAA;;;;AACA;;IAAYA,O;;;;;;AAEZ,MAAMC,WAAWC,iBAAEC,SAAF,CAAYH,OAAZ,EAAqBI,UAAU;AAC9C,MAAI;AACF,UAAMC,cAAcD,OAAO,IAAP,EAAa,IAAb,EAAmB,qBAAnB,CAApB;AACA,QAAIC,WAAJ,EAAiB;AACf,YAAMC,SAASJ,iBAAEK,IAAF,CAAOF,YAAYG,QAAnB,EAA6BC,MAA7B,CAAoCC,KAAK,CAACA,EAAEC,UAAF,CAAa,IAAb,CAA1C,CAAf;AACA,YAAMV,WAAW;AACfW,eAAOV,iBAAEW,GAAF,CAAMR,WAAN,EAAmB,8BAAnB,CADQ;AAEfA,qBAAaH,iBAAEW,GAAF,CAAMR,WAAN,EAAmB,oCAAnB,CAFE;AAGfS,kBAAUZ,iBAAEW,GAAF,CAAMR,WAAN,EAAmB,iCAAnB,CAHK;AAIfC,gBAAQ;AAJO,OAAjB;;AAOA,WAAK,MAAMS,GAAX,IAAkBT,MAAlB,EAA0B;AACxB,cAAMU,QAAQX,YAAYG,QAAZ,CAAqBO,GAArB,EAA0BC,KAAxC;AACA,cAAMC,WAAWD,SAASA,MAAME,QAAN,KAAmB,UAA7C;AACA,cAAMC,MAAMH,SAASA,MAAMI,OAA3B;;AAEAnB,iBAASK,MAAT,CAAgBe,IAAhB,CAAqB;AACnBhB,uBAAaA,YAAYG,QAAZ,CAAqBO,GAArB,EAA0BV,WADpB;AAEnBiB,gBAAMP,GAFa;AAGnBE,kBAHmB;AAInBG,mBAASD,GAJU;AAKnBI,gBAAMlB,YAAYG,QAAZ,CAAqBO,GAArB,EAA0BQ;AALb,SAArB;AAOD;;AAED,aAAOtB,QAAP;AACD;AACF,GA3BD,CA2BE,OAAOuB,GAAP,EAAY,CAAE;;AAEhB,SAAO,IAAP;AACD,CA/BgB,CAAjB;;kBAiCevB,Q","file":"metadata.js","sourcesContent":["import _ from 'lodash'\nimport * as actions from './index'\n\nconst metadata = _.mapValues(actions, action => {\n  try {\n    const description = action(null, null, 'bp::describe-action')\n    if (description) {\n      const params = _.keys(description.children).filter(x => !x.startsWith('__'))\n      const metadata = {\n        title: _.get(description, 'children.__title.description'),\n        description: _.get(description, 'children.__description.description'),\n        category: _.get(description, 'children.__category.description'),\n        params: []\n      }\n\n      for (const key of params) {\n        const flags = description.children[key].flags\n        const required = flags && flags.presence === 'required'\n        const def = flags && flags.default\n\n        metadata.params.push({\n          description: description.children[key].description,\n          name: key,\n          required,\n          default: def,\n          type: description.children[key].type\n        })\n      }\n\n      return metadata\n    }\n  } catch (err) {}\n\n  return null\n})\n\nexport default metadata\n"]}