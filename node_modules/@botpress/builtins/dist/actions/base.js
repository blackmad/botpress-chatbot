'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.Annotate = undefined;

var _joi = require('joi');

var _joi2 = _interopRequireDefault(_joi);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

exports.default = (handler, schema) => (state, event, options) => {
  if (options == 'bp::describe-action') {
    if (schema) {
      return _joi2.default.describe(schema);
    } else {
      return {};
    }
  }

  if (schema) {
    options = _joi2.default.attempt(options, schema, 'Invalid options provided to action');
  }

  return handler(event.bp, state, event, options || {});
};

const Annotate = exports.Annotate = (category = 'None', title = '', description = '') => {
  return {
    __category: _joi2.default.any().optional().strip().description(category),
    __title: _joi2.default.any().optional().strip().description(title),
    __description: _joi2.default.any().optional().strip().description(description)
  };
};
//# sourceMappingURL=base.js.map